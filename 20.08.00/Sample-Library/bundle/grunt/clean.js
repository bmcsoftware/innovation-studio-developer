module.exports = function (grunt, config) {
    if (!config.bundle.coverage) {
        config.bundle.coverage = './target/coverage';

        grunt.log.writeln('INFO: Coverage report path is not defined in bundle.conf.js. Default path will be used: ' + config.bundle.coverage);
    }

    return {
        all: [config.bundle.coverage, '<%= bundle.target %>'],
        // remove all files under the 'coverage' directory except for full/full.json.
        // This file is generated by 'grunt karma' task and is used by rxCoverage task
        // when generating coverage reports for groups defined in coverage.conf.js.
        // The order of paths is important here due to a known issue in the 'grunt-contrib-clean' package.
        // https://github.com/gruntjs/grunt-contrib-clean/issues/65
        coverage: [
            config.bundle.coverage + '/*',
            '!' + config.bundle.coverage + '/full/**',
            config.bundle.coverage + '/full/*',
            '!' + config.bundle.coverage + '/full/full.json'
        ],
        license: '<%= bundle.target %>/../LICENSE-VENDOR.txt'
    };
};